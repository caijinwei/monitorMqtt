<!DOCTYPE html>
<html lang="en" ng-app="weconweb">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="stylesheet" type="text/css" href="../lib/bootstrap/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/animate.min.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/base.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../css/page.css"/>
    <script src="../lib/jquery/jquery.min.js?v=2.1.4"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
    <script src="../lib/utils.js"></script>

    <script src="../lib/mqtt/mqttws31.js"></script>
    <script src="../lib/wecon-common.js"></script>

    <link href="../lib/loader.css" rel="stylesheet">


    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>-->
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
    <!--低版本浏览器识别HTML5标签-->
    <!--低版本浏览器支持CSS媒体查询-->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../lib/html5shiv/html5shiv-printshiv.min.js"></script>
    <script type="text/javascript" src="../lib/respond/respond.min.js"></script>
    <![endif]-->
    <style>
        .form-group span {
            line-height: 30px;;
        }

        tr {
            height: 40px;
        }

        .float-e-margins .btn {
            margin-bottom: 0px;
        }

        #chgPwd label, #chgState label {
            font-size: 15px;
            font-weight: 200;
        }

        #chgState p {
            font-size: 15px;
            font-weight: 200;
            padding-left: 15px;
        }
    </style>
</head>

<div id="loader-wrapper">
    <div id="loader"></div>
    <div class="loader-section section-left"></div>
    <div class="loader-section section-right"></div>
    <div class="load_title">正在加载....</div>
</div>

<body ng-controller="infoController" ng-init="onInit()">
<div class="container" style="padding-top: 40px;width:100%;">
    <div class="row">
        <div class="col-sm-12" style="margin: 0 auto;">
            <div class="ibox float-e-margins">
                <div id="search-div" class="ibox-content" style="padding-left: 20px;">
                    <div class="alert alert-success"
                         style="background: rgb(26,164,140); color:white;margin-bottom: 30px;">
                        <span style="font-size: 15px;">主页 > MQTT监控</span>
                    </div>
                    <div style="clear: both;"></div>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th>MQTT服务器名</th>
                                <th>MQTT地址</th>
                                <th>端口</th>
                                <th>报警连接数</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr change-color>
                                <td>{{mqttConfig.serverName}}</td>
                                <td>{{mqttConfig.serverIP}}</td>
                                <td>{{mqttConfig.port}}</td>
                                <td>{{mqttConfig.maxConn}}</td>

                            </tr>

                            <tr>
                                <td colspan="2">
                                    <table class="table table-bordered">
                                        <!--
                                            3.$SYS/broker/clients/connected 当前在线的客户端数
                                               6.$SYS/broker/clients/maximum  最大并发连接数
                                             4.$SYS/broker/clients/expired  超时的连接数
                                             5.$SYS/broker/clients/disconnected 断开的连接数

                                             7.$SYS/broker/clients/total  所有连接数（活动的和非活动的）
                                             8.$SYS/broker/heap/current size  当前用到的内
                                             9.$SYS/broker/heap/maximum size  用到的最大内存
                                             * 1.$SYS/broker/bytes/received  收到的所有字节数
                                             2.$SYS/broker/bytes/sent  发送的所有字节数
                                        -->
                                        <tr>
                                            <td>当前在线的客户端数</td>
                                            <td><span id="connectedId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>最大并发连接数</td>
                                            <td><span id="maximumId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>超时的连接数</td>
                                            <td><span id="expiredId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>断开的连接数</td>
                                            <td><span id="disconnectedId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>所有连接数（活动的和非活动的）</td>
                                            <td><span id="totalId"></span></td>
                                        </tr>

                                        <tr>
                                            <td>当前用到的内存</td>
                                            <td><span id="currentSizeId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>用到的最大内存</td>
                                            <td><span id="maximumSizeId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>收到的所有字节数</td>
                                            <td><span id="receivedId"></span></td>
                                        </tr>
                                        <tr>
                                            <td>发送的所有字节数</td>
                                            <td><span id="sentId"></span></td>
                                        </tr>

                                    </table>


                                </td>


                                <td colspan="3">
                                    <canvas id="canvas" style="height: 300px;"></canvas>
                                </td>
                            </tr>

                            </tbody>


                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="../lib/bootstrap/js/bootstrap.min.js?v=3.3.6"></script>
<script src="../lib/sweetalert.min.js"></script>
<script src="../lib/angular/angular.min.js" type="text/javascript"></script>
<script src="../lib/wecon-common.js" type="text/javascript"></script>
<script src="../js/mqttMonitor.js" type="text/javascript"></script>
<script src="../lib/pagination.js" type="text/javascript"></script>

</body>


</html>